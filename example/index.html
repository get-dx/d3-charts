<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, sans-serif;
        font-size: 1rem;
        line-height: 1.5;
        color: #000000;
        background-color: #fff;
        display: flex;
      }

      main {
        margin-left: 240px;
        padding: 2rem 4rem;
        flex: 1;
        max-width: calc(100vw - 240px);
      }

      .section {
        border: 1px solid #e5e5e5;
        border-radius: 0.5rem;
        padding: 2rem;
        margin-bottom: 2rem;
      }

      .section-title {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #e5e5e5;
      }

      .section-content {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 2rem;
      }

      .card {
        background-color: #fff;
        border-radius: 0.25rem;
        padding: 1rem;
        width: 100%;
        min-width: 0;
      }

      .card.full-width {
        grid-column: 1 / -1;
      }

      .card-title {
        font-weight: bold;
        height: 3rem;
        margin-bottom: 0.5rem;
      }

      .chart-container {
        --height: 300px;
        height: var(--height);
        width: 100%;
      }

      .nav {
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        width: 240px;
        background: white;
        padding: 2rem 1rem;
        border-right: 1px solid #e5e5e5;
        overflow-y: auto;
      }

      .nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .nav a {
        color: #6366f1;
        text-decoration: none;
        display: block;
        padding: 0.5rem;
        border-radius: 0.25rem;
      }

      .nav a:hover {
        background-color: #f3f4f6;
      }
    </style>
    <link rel="stylesheet" href="css/chart.css" />
  </head>
  <body>
    <nav class="nav">
      <ul>
        <li><a href="#stacked">Stacked Charts</a></li>
        <li><a href="#pie">Pie Charts</a></li>
        <li><a href="#scatter">Scatter Charts</a></li>
        <li><a href="#bar">Bar Charts</a></li>
        <li><a href="#scatter-time">Scatter Time Charts</a></li>
        <li><a href="#line">Line Charts</a></li>
        <li><a href="#multi-line">Multi-Line Charts</a></li>
        <li><a href="#bump">Bump Charts</a></li>
        <li><a href="#chart-comparison">Chart Comparison</a></li>
      </ul>
    </nav>

    <main>
      <!-- Stacked Charts Section -->
      <section id="stacked" class="section">
        <h2 class="section-title">Stacked Charts</h2>
        <div class="section-content">
          <div class="card full-width">
            <div class="card-title">Basic Stacked Area Chart with Date Tooltip</div>
            <div class="card-body">
              <div id="stacked-area-chart" class="chart-container"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Basic Stacked Bar Chart</div>
            <div class="card-body">
              <div id="stacked-bar-1-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Stacked Bar with Trendline</div>
            <div class="card-body">
              <div id="stacked-bar-2-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Single Series Bar with Trendline</div>
            <div class="card-body">
              <div id="stacked-bar-3-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
          <div class="card full-width">
            <div class="card-title">Dense Multi-Series Bar Chart</div>
            <div class="card-body">
              <div id="dense-multi-line-stacked-bar" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Pie Charts Section -->
      <section id="pie" class="section">
        <h2 class="section-title">Pie Charts</h2>
        <div class="section-content">
          <div class="card">
            <div class="card-title">Basic Pie Chart with Dataset 1</div>
            <div class="card-body">
              <div id="pie-1-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Basic Pie Chart with Dataset 2</div>
            <div class="card-body">
              <div id="pie-2-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Basic Pie Chart with Dataset 3</div>
            <div class="card-body">
              <div id="pie-3-chart" class="chart-container" style="--height: 314px"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Custom Colored Pie Chart (No Value Labels)</div>
            <div class="card-body">
              <div id="pie-4-chart" class="chart-container" style="--height: 314px"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Scatter Charts Section -->
      <section id="scatter" class="section">
        <h2 class="section-title">Scatter Charts</h2>
        <div class="card">
          <div class="card-title">Scatter with Trendline & Click Events</div>
          <div class="card-body">
            <div id="scatter-1-chart" class="chart-container" style="--height: 400px"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Matrix Scatter (No Axis)</div>
          <div class="card-body">
            <div id="scatter-2-chart" class="chart-container" style="--height: 400px"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Quadrant Scatter with Highlighted Region</div>
          <div class="card-body">
            <div id="scatter-3-chart" class="chart-container" style="--height: 400px"></div>
          </div>
        </div>
      </section>

      <!-- Bar Charts Section -->
      <section id="bar" class="section">
        <h2 class="section-title">Bar Charts</h2>
        <div class="section-content">
          <div class="card">
            <div class="card-title">Basic Bar with Click Events (No X-Axis)</div>
            <div class="card-body">
              <div id="bar-1-chart" class="chart-container"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Bar with Trendline & Custom Padding</div>
            <div class="card-body">
              <div id="bar-2-chart" class="chart-container"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Fixed Width Bar Chart (40px)</div>
            <div class="card-body">
              <div id="bar-3-chart" class="chart-container"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Bar Chart with Large Values</div>
            <div class="card-body">
              <div id="bar-4-chart" class="chart-container"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Scatter Time Charts Section -->
      <section id="scatter-time" class="section">
        <h2 class="section-title">Scatter Time Charts</h2>
        <div class="card">
          <div class="card-title">Time Scatter with Trendline & Custom Y-Axis</div>
          <div class="card-body">
            <div id="scatter-time-1-chart" class="chart-container"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Basic Time Scatter with Click Events</div>
          <div class="card-body">
            <div id="scatter-time-2-chart" class="chart-container"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Time Scatter with Benchmark Line</div>
          <div class="card-body">
            <div id="scatter-time-3-chart" class="chart-container"></div>
          </div>
        </div>
      </section>

      <!-- Line Charts Section -->
      <section id="line" class="section">
        <h2 class="section-title">Line Charts</h2>
        <div class="card">
          <div class="card-title">Basic Line (No X-Axis Ticks)</div>
          <div class="card-body">
            <div id="line-1-chart" class="chart-container"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Basic Line with Click Events</div>
          <div class="card-body">
            <div id="line-2-chart" class="chart-container"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Single Point Line Chart</div>
          <div class="card-body">
            <div id="line-3-chart" class="chart-container"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Line with Comparison Values</div>
          <div class="card-body">
            <div id="line-4-chart" class="chart-container"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Line with Points (Custom Date Range)</div>
          <div class="card-body">
            <div id="line-5-chart" class="chart-container"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Line with Dotted Last Segment</div>
          <div class="card-body">
            <div id="line-6-chart" class="chart-container"></div>
          </div>
        </div>
      </section>

      <!-- Multi-Line Charts Section -->
      <section id="multi-line" class="section">
        <h2 class="section-title">Multi-Line Charts</h2>
        <div class="section-content">
          <div class="card">
            <div class="card-title">Multi-Line with Points & Custom Y-Axis Ticks</div>
            <div class="card-body">
              <div id="multi-line-1-chart" class="chart-container"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Multi-Line with Full Axis Labels</div>
            <div class="card-body">
              <div id="multi-line-2-chart" class="chart-container"></div>
            </div>
          </div>
          <div class="card" style="grid-column: span 2">
            <div class="card-title">Dense Multi-Line with Limited Ticks & Points</div>
            <div class="card-body">
              <div id="dense-multi-line-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Multi-Line with Custom Date Format</div>
            <div class="card-body">
              <div id="multi-line-3-chart" class="chart-container"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Bump Charts Section -->
      <section id="bump" class="section">
        <h2 class="section-title">Bump Charts</h2>
        <div class="card" style="grid-column: span 2">
          <div class="card-title">Bump Chart with Focus on "Ease of release"</div>
          <div class="card-body">
            <div id="bump-chart" class="chart-container"></div>
          </div>
        </div>
      </section>

      <!-- Chart Height Comparison Section -->
      <section id="chart-comparison" class="section">
        <h2 class="section-title">Chart Height Comparison</h2>
        <div class="section-content">
          <div class="card">
            <div class="card-title">Bar Chart with Trendline (400px Height)</div>
            <div class="card-body">
              <div id="comparison-bar-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Multi-Line with Points (400px Height)</div>
            <div class="card-body">
              <div id="comparison-line-chart" class="chart-container" style="--height: 400px"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <!-- D3 Peer dependency-->
    <script type="importmap">
      {
        "imports": {
          "d3": "https://cdn.jsdelivr.net/npm/d3@7/+esm"
        }
      }
    </script>
    <script type="module">
      import * as d3 from "d3";
      import {
        BarChart,
        BumpChart,
        LineChart,
        MultiLineChart,
        PieChart,
        ScatterChart,
        ScatterTimeChart,
        StackedBarChart,
        StackedAreaChart
      // } from "../dist/main.js";
      } from "/src/main.js";

      const emptyTooltip = () => `<div></div>`;

      // Stacked area chart
      {
        const stackedAreaChart = new StackedAreaChart({
          elChart: document.getElementById("stacked-area-chart"),
          tooltipHtml: emptyTooltip
        });

        d3.json("data/stacked_area_dataset.json").then(dataset => {
          stackedAreaChart.values = dataset;
          stackedAreaChart.redraw();
        })
      }

      // Stacked bar charts
      {
        const stackedBar1 = new StackedBarChart({
          elChart: document.getElementById("stacked-bar-1-chart"),
          tooltipHtml: emptyTooltip,
        });

        const stackedBar2 = new StackedBarChart({
          elChart: document.getElementById("stacked-bar-2-chart"),
          tooltipHtml: emptyTooltip,
          series: [
            { key: "additions", color: "#6366f1" },
            { key: "deletions", color: "#e5e5e5" },
          ],
          maxBarWidth: 48,
          showTrendline: true,
          axis: {
            x: {
              label: "X Axis Label",
            },
            y: {
              label: "Y Axis Label",
            },
          },
          xAxisTickLabelFormat: (d) => `${d}`,
          showYAxisTicks: true,
          yAxisTickLabelFormat: (d) => `${d}%`,
        });

        d3.json("data/stacked_bar_dataset.json").then((dataset) => {
          stackedBar1.values = dataset;
          stackedBar1.redraw();

          stackedBar2.values = dataset;
          stackedBar2.redraw();
        });
      }

      // Pie charts
      {
        const pie1 = new PieChart({
          elChart: document.getElementById("pie-1-chart"),
          tooltipHtml: emptyTooltip,
        });

        const pie2 = new PieChart({
          elChart: document.getElementById("pie-2-chart"),
          tooltipHtml: emptyTooltip,
        });

        const pie3 = new PieChart({
          elChart: document.getElementById("pie-3-chart"),
          tooltipHtml: emptyTooltip,
        });

        const pie4 = new PieChart({
          elChart: document.getElementById("pie-4-chart"),
          values: [
            {
              label: "A",
              value: 25,
              color: "red",
            },
            {
              label: "B",
              value: 25,
              color: "green",
            },
            {
              label: "C",
              value: 25,
              color: "blue",
            },
            {
              label: "D",
              value: 25,
              color: "purple",
            },
          ],
          minAngleForValueLabel: 360,
        });

        Promise.all([
          d3.json("data/pie_dataset_1.json"),
          d3.json("data/pie_dataset_2.json"),
          d3.json("data/pie_dataset_3.json"),
        ]).then(([dataset1, dataset2, dataset3]) => {
          pie1.values = dataset1;
          pie1.redraw();

          pie2.values = dataset2;
          pie2.redraw();

          pie3.values = dataset3;
          pie3.redraw();
        });
      }
      // Scatter charts
      {
        const scatter1 = new ScatterChart({
          elChart: document.getElementById("scatter-1-chart"),
          xAxisTickLabelFormat: function (d) {
            return `${d}%`;
          },
          yAxisTickLabelFormat: function (d) {
            return `${d}%`;
          },
          showTrendline: true,
          axis: {
            x: {
              label: "Something",
              min: 0,
              max: 100,
            },
            y: {
              label: "Something Else",
              min: 0,
              max: 200,
            },
          },
          onClick: function (d) {
            alert(d.team);
          },
          labelTextFormat: function (d) {
            return d.team;
          },
          tooltipHtml: emptyTooltip,
        });

        scatter1.values = [
          {
            x: 5,
            y: 40,
            team: "Team 1",
          },
          {
            x: 9,
            y: 50,
            team: "Team 2",
          },
          {
            x: 10,
            y: 64,
            team: "Team 3",
          },
          {
            x: 10,
            y: 65,
            team: "Team 4",
          },
          {
            x: 32,
            y: 24,
            team: "Team 5",
          },
        ];
        scatter1.redraw();

        const scatter2 = new ScatterChart({
          elChart: document.getElementById("scatter-2-chart"),
          showXAxisTicks: false,
          showXAxisLabel: false,
          showXAxisLine: false,
          xAxisTickLabelSpread: 40,
          showYAxisTicks: false,
          showYAxisLabel: false,
          showYAxisLine: false,
          yAxisTickLabelSpread: 40,
          matrix: [18, 50],
          axis: {
            x: {
              label: "Something",
            },
            y: {
              label: "Something Else",
            },
          },
        });

        scatter2.values = [
          {
            x: 5,
            y: 40,
          },
          {
            x: 9,
            y: 50,
          },
          {
            x: 10,
            y: 64,
          },
          {
            x: 10,
            y: 65,
          },
          {
            x: 32,
            y: 24,
          },
        ];
        scatter2.redraw();

        const scatter3 = new ScatterChart({
          elChart: document.getElementById("scatter-3-chart"),
          matrix: [50, 50],
          highlightedQuadrant: 4,
          axis: {
            x: {
              label: "Impact",
              min: 0,
              max: 100,
            },
            y: {
              label: "Performance",
              min: 0,
              max: 100,
            },
          },
          dotRadius: 5,
          showXAxisTicks: false,
          showXAxisLine: false,
          showXAxisTickLabels: false,
          showYAxisTicks: false,
          showYAxisLine: false,
          showYAxisTickLabels: false,
          labelTextFormat: function (d) {
            return d.team;
          },
          tooltipHtml: emptyTooltip,
        });

        scatter3.values = [
          {
            x: 95,
            y: 40,
            team: "Team 1",
          },
          {
            x: 9,
            y: 50,
            team: "Team 2",
          },
          {
            x: 80,
            y: 64,
            team: "Team 3",
          },
          {
            x: 10,
            y: 65,
            team: "Team 4",
          },
          {
            x: 72,
            y: 24,
            team: "Team 5",
          },
        ];
        scatter3.redraw();
      }
      // Bar charts
      {
        const bar1 = new BarChart({
          elChart: document.getElementById("bar-1-chart"),
          showXAxisLine: false,
          onClick: (d) => {
            console.log(d);
          },
          tooltipHtml: emptyTooltip,
        });
        bar1.values = [
          {
            date: "2022-07-27",
            dateLabel: "Mon, 7/27",
            value: 5,
          },
          {
            date: "2022-07-28",
            dateLabel: "Tue, 7/28",
            value: null,
          },
          {
            date: "2022-08-27",
            dateLabel: "Mon, 8/27",
            value: 7,
          },
        ];
        bar1.redraw();

        const bar2 = new BarChart({
          elChart: document.getElementById("bar-2-chart"),
          showTrendline: true,
          paddingOuter: 0.2,
          paddingInner: 0.4,
          onClick: (d) => {
            console.log(d);
          },
          tooltipHtml: emptyTooltip,
        });
        bar2.values = [
          {
            date: "2022-07-27",
            dateLabel: "Mon, 7/27",
            value: 5,
          },
          {
            date: "2022-07-28",
            dateLabel: "Tue, 7/28",
            value: 6,
          },
          {
            date: "2022-08-27",
            dateLabel: "Mon, 8/27",
            value: 8,
          },
        ];
        bar2.redraw();

        const bar3 = new BarChart({
          elChart: document.getElementById("bar-3-chart"),
          maxBarWidth: 40,
          paddingOuter: 0.2,
          paddingInner: 0.4,
          showXAxisTickLabels: true,
          showYAxisTickLabels: true,
          values: [
            {
                "id": 22,
                "name": "Bugs",
                "value": 25.241758241758241758,
                "color": "rgb(129, 140, 248)"
            },
            {
                "id": 23,
                "name": "Tech debt",
                "value": 24.084915084915084915,
                "color": "rgb(52, 211, 153)"
            },
            {
                "id": 24,
                "name": "KTLO",
                "value": 25.265734265734265734,
                "color": "rgb(251, 146, 60)"
            },
            {
                "id": 21,
                "name": "Other",
                "value": 25.407592407592407592,
                "color": "rgb(192, 132, 252)"
            }
          ],
          tooltipHtml: emptyTooltip,
        })
      }
      // Scatter time charts
      {
        const scatter1 = new ScatterTimeChart({
          elChart: document.getElementById("scatter-time-1-chart"),
          showTrendline: true,
          tooltipHtml: emptyTooltip,
          onClick: (d) => {
            console.log(d);
          },
        });

        const scatter2 = new ScatterTimeChart({
          elChart: document.getElementById("scatter-time-2-chart"),
          showTrendline: true,
          tooltipHtml: emptyTooltip,
          onClick: (d) => {
            console.log(d);
          },
        });

        const scatter3 = new ScatterTimeChart({
          elChart: document.getElementById("scatter-time-3-chart"),
          startDate: "2022-12-01",
          endDate: "2023-06-01",
          values: [
            {
              value: 77,
              date: "2022-12-13",
            },
            {
              value: 142,
              date: "2023-03-04",
            },
          ],
          showTrendline: true,
          benchmarkValue: 90,
        });

        Promise.all([
          d3.json("./data/dataset_1.json"),
          d3.json("./data/dataset_2.json"),
        ]).then(([dataset1, dataset2]) => {
          scatter1.startDate = "2014-07-01";
          scatter1.endDate = "2023-05-01";
          scatter1.yAxisMin = -10;
          scatter1.yAxisMax = 20;
          scatter1.values = dataset1;
          scatter1.redraw();

          scatter2.values = dataset2;
          scatter2.redraw();
        });
      }
      // Line charts
      {
        const data1 = {
          values: [
            {
              date: "2021-01-14",
              value: 50,
            },
            {
              date: "2021-03-21",
              value: 75,
            },
            {
              date: "2021-06-03",
              value: 65,
            },
            {
              date: "2021-09-05",
              value: 82,
            },
          ],
          comparisonValues: [
            {
              date: "2021-03-21",
              value: 70,
            },
            {
              date: "2021-06-03",
              value: 68,
            },
            {
              date: "2021-09-05",
              value: 68,
            },
          ],
        };

        const data2 = {
          values: [
            {
              date: "2021-03-21",
              value: 83,
            },
            {
              date: "2021-06-03",
              value: 33,
            },
          ],
          comparisonValues: [
            {
              date: "2021-06-03",
              value: 30,
            },
          ],
        };

        const data3 = {
          values: [
            {
              date: "2021-03-21",
              value: 34,
            },
          ],
          comparisonValues: [
            {
              date: "2021-03-21",
              value: 38,
            },
          ],
        };

        const data4 = {
          values: [
            {
              date: "2021-03-21",
              dateLabel: "March 2021",
              value: 34,
            },
            {
              date: "2021-04-21",
              dateLabel: "April 2021",
              value: 3,
            },
            {
              date: "2021-05-21",
              dateLabel: "May 2021",
              value: 10,
            },
          ],
          comparisonValues: [
            {
              date: "2021-04-21",
              dateLabel: "April 2021",
              value: 2,
            },
            {
              date: "2021-05-21",
              dateLabel: "May 2021",
              value: 12,
            },
          ],
        };

        const startDate = "2021-01-01";
        const endDate = "2021-12-31";

        const line1 = new LineChart({
          elChart: document.getElementById("line-1-chart"),
          showXAxisTicks: false,
          tooltipHtml: emptyTooltip,
          onClick: (d, cd) => {
            console.log(d, cd);
          },
          showYAxisTickLabels: true,
          showYAxisTicks: true,
          startDate,
          endDate,
          yAxisLabel: "Y Axis",
        });
        line1.yAxisMin = 0;
        line1.yAxisMax = 100;
        line1.values = data1.values;
        line1.redraw();

        // document.addEventListener("click", function () {
        //   line1.comparisonValues = data1.comparisonValues;
        //   line1.redraw();
        // });

        const line2 = new LineChart({
          elChart: document.getElementById("line-2-chart"),
          tooltipHtml: emptyTooltip,
          onClick: (d, cd) => {
            console.log(d, cd);
          },
        });
        line2.startDate = startDate;
        line2.endDate = endDate;
        line2.values = data2.values;
        line2.redraw();

        const line3 = new LineChart({
          elChart: document.getElementById("line-3-chart"),
          tooltipHtml: emptyTooltip,
          onClick: (d, cd) => {
            console.log(d, cd);
          },
        });
        line3.startDate = startDate;
        line3.endDate = endDate;
        line3.values = data3.values;
        line3.redraw();

        const line4 = new LineChart({
          elChart: document.getElementById("line-4-chart"),
          tooltipHtml: emptyTooltip,
          onClick: (d, cd) => {
            console.log(d, cd);
          },
        });
        line4.values = data4.values;
        line4.comparisonValues = data4.comparisonValues;
        line4.redraw();

        const line5 = new LineChart({
          elChart: document.getElementById("line-5-chart"),
          startDate: "2022-12-01",
          endDate: "2023-06-01",
          showXAxisTicks: false,
          showPoints: true,
          values: [
            {
              value: 77,
              date: "2022-12-13",
            },
            {
              value: 142,
              date: "2023-03-04",
            },
          ],
          tooltipHtml: emptyTooltip,
        });

        const line6 = new LineChart({
          elChart: document.getElementById("line-6-chart"),
          startDate: "2022-01-01",
          endDate: "2023-01-01",
          dotLastSegment: true,
          values: [
            {
              value: 0,
              date: "2022-01-01",
            },
            {
              value: 0,
              date: "2022-02-01",
            },
            {
              value: 0,
              date: "2022-03-01",
            },
            {
              value: 0,
              date: "2022-04-01",
            },
            {
              value: 0,
              date: "2022-05-01",
            },
            {
              value: 0,
              date: "2022-06-01",
            },
            {
              value: 0,
              date: "2022-07-01",
            },
            {
              value: 0,
              date: "2022-08-01",
            },
            {
              value: 0,
              date: "2022-01-01",
            },
            {
              value: 0,
              date: "2022-09-01",
            },
            {
              value: 0,
              date: "2022-10-01",
            },
            {
              value: 250,
              date: "2022-11-01",
            },
            {
              value: 280,
              date: "2022-12-01",
            },
            {
              value: 0,
              date: "2023-01-01",
            },
          ],
          tooltipHtml: emptyTooltip,
        });
      }

      // Multi-Line Chart
      {
        const multiLine1 = new MultiLineChart({
          elChart: document.getElementById("multi-line-1-chart"),
          yAxisTickLabelSpread: 30,
          showPoints: true,
          tooltipHtml: emptyTooltip,
        });
        d3.json("data/multi_line_chart_dataset.json").then((data) => {
          multiLine1.series = data.series;
          multiLine1.values = data.values;
          multiLine1.redraw();
        })
      }
      {
        const multiLine2 = new MultiLineChart({
          elChart: document.getElementById("multi-line-2-chart"),
          showYAxisTickLabels: true,
          showYAxisTicks: true,
          yAxisLabel: "Y Axis",
          xAxisLabel: "X Axis",
          showPoints: true,
          tooltipHtml: emptyTooltip,
        });
        d3.json("data/multi_line_chart_dataset.json").then((data) => {
          multiLine2.series = data.series;
          multiLine2.values = data.values;
          multiLine2.redraw();
        })
      }

      // Bump Chart
      {
        d3.json("data/bump_dataset.json").then((data) => {
          const bumpChart = new BumpChart({
            elChart: document.getElementById("bump-chart"),
            data,
            focusedOn: "Ease of release"
          });
        });
      }

      // Create sample data with many points
      const generateData = () => {
        const startDate = new Date('2024-01-01');
        const series = ['Series A', 'Series B', 'Series C'];
        const values = [];
        
        // Generate 50 dates (daily) for each series
        series.forEach(seriesName => {
          for (let i = 0; i < 50; i++) {
            const date = new Date(startDate);
            date.setDate(date.getDate() + i);
            
            values.push({
              xValue: date.toISOString().split('T')[0],
              series: seriesName,
              yValue: Math.floor(Math.random() * 100) + 20 // Random value between 20-120
            });
          }
        });
        
        return {
          series: series.map(name => ({
            key: name,
            color: name === 'Series A' ? '#6366f1' : 
                   name === 'Series B' ? '#22c55e' : '#f97316'
          })),
          values
        };
      };

      // Create chart instance
      const data = generateData();
      const multiLineChart = new MultiLineChart({
        elChart: document.getElementById("dense-multi-line-chart"),
        series: data.series,
        values: data.values,
        
        // Enable tick limiting with minimum spacing
        minTickSpacing: 20,
        
        // Show points for better visualization
        showPoints: true,
        
        // Configure axes
        showYAxisTickLabels: true,
        showYAxisTicks: true,
        yAxisLabel: "Value",
        
        // Add tooltip
        tooltipHtml: emptyTooltip,
      });

      // Initial render
      multiLineChart.redraw();

      const stackedBar3 = new StackedBarChart({
        elChart: document.getElementById("stacked-bar-3-chart"),
        tooltipHtml: emptyTooltip,
        series: [
          { key: "additions", color: "#6366f1" },
        ],
        values: [
          {
            xValue: "Oct 21",
            series: "additions",
            yValue: 1250
          },
          {
            xValue: "Oct 28",
            series: "additions",
            yValue: 50
          },
          {
            xValue: "Nov 04",
            series: "additions",
            yValue: 100
          },
          {
            xValue: "Nov 11",
            series: "additions",
            yValue: 400
          },
          {
            xValue: "Nov 18",
            series: "additions",
            yValue: 150
          },
        ],
        yAxisLabel: "Count",
        xAxisLabel: "during the week of",
        showTrendline: true,
      });

      stackedBar3.redraw();

      // Chart Height Comparison
      const comparisonBar = new StackedBarChart({
        elChart: document.getElementById("comparison-bar-chart"),
        tooltipHtml: emptyTooltip,
        series: [
          { key: "additions", color: "#6366f1" },
        ],
        values: [
          { xValue: "Oct 21", series: "additions", yValue: 1250 },
          { xValue: "Oct 28", series: "additions", yValue: 50 },
          { xValue: "Nov 04", series: "additions", yValue: 100 },
          { xValue: "Nov 11", series: "additions", yValue: 400 },
          { xValue: "Nov 18", series: "additions", yValue: 150 },
        ],
        axis: {
          y: { label: "Count" },
          x: { label: "Week of" }
        },
        showTrendline: true,
      });

      const comparisonLine = new MultiLineChart({
        elChart: document.getElementById("comparison-line-chart"),
        tooltipHtml: emptyTooltip,
        series: [
          { key: "deletions", color: "#f87171" },
          { key: "additions", color: "#60a5fa" },
          { key: "files_changed", color: "#fb923c" }
        ],
        values: [
          { xValue: "2024-10-21", series: "deletions", yValue: 1 },
          { xValue: "2024-10-28", series: "deletions", yValue: 52 },
          { xValue: "2024-11-05", series: "deletions", yValue: 6 },
          { xValue: "2024-11-12", series: "deletions", yValue: 12 },
          { xValue: "2024-11-19", series: "deletions", yValue: 4 },
          { xValue: "2024-10-21", series: "additions", yValue: 10 },
          { xValue: "2024-10-28", series: "additions", yValue: 2 },
          { xValue: "2024-11-05", series: "additions", yValue: 64 },
          { xValue: "2024-11-12", series: "additions", yValue: 1 },
          { xValue: "2024-11-19", series: "additions", yValue: 9 },
          { xValue: "2024-10-21", series: "files_changed", yValue: 88 },
          { xValue: "2024-10-28", series: "files_changed", yValue: 24 },
          { xValue: "2024-11-05", series: "files_changed", yValue: 4 },
          { xValue: "2024-11-12", series: "files_changed", yValue: 42 },
          { xValue: "2024-11-19", series: "files_changed", yValue: 9 }
        ],
        xAxisLabel: "Week of",
        // yAxisLabel: "Count",
        showPoints: true
      });

      comparisonBar.redraw();
      comparisonLine.redraw();

      // New data generator for name-based data
      const generateNameData = () => {
        const firstNames = [
          'Alice', 'Bob', 'Charlie', 'David', 'Emma', 
          'Frank', 'Grace', 'Henry', 'Isabel', 'Jack', 
          'Kyle', 'Liam', 'Mason', 'Noah', 'Olivia', 
          'Pam', 'Quinn', 'Rachel', 'Sam', 'Tyler', 
          'Uma', 'Vincent', 'Wendy', 'Xander', 'Yara', 
          'Zane'
        ];

        const lastNames = [
          'Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 
          'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez', 
          'Hernandez', 'Lopez', 'Gonzalez', 'Wilson', 'Anderson', 
          'Thomas', 'Taylor', 'Moore', 'Jackson', 'Martin', 
          'Lee', 'Perez', 'Thompson', 'White', 'Harris', 
          'Sanchez'
        ];

        const names = firstNames.map((firstName, index) => `${firstName} ${lastNames[index]}`);
        const series = ['Code Reviews', 'Pull Requests', 'Comments'];
        const values = [];
        
        names.forEach(name => {
          series.forEach(seriesName => {
            values.push({
              xValue: name,
              series: seriesName,
              // Random value between 10-50
              yValue: Math.floor(Math.random() * 40) + 10
            });
          });
        });
        
        return {
          series: series.map(name => ({
            key: name,
            color: name === 'Code Reviews' ? '#6366f1' : 
                   name === 'Pull Requests' ? '#22c55e' : '#f97316'
          })),
          values
        };
      };

      const nameBasedData = generateNameData();
      
      const denseStackedBar = new StackedBarChart({
        elChart: document.getElementById("dense-multi-line-stacked-bar"),
        series: nameBasedData.series,
        values: nameBasedData.values,
        tooltipHtml: emptyTooltip,
        axis: {
          y: { label: "Count" },
          x: { label: "Developer" }
        },
        showTrendline: true,
        maxBarWidth: 48,
      });

      denseStackedBar.redraw();

      // Add this new chart in the Multi-Line Charts section
      {
        const multiLine3 = new MultiLineChart({
          elChart: document.getElementById("multi-line-3-chart"),
          showPoints: true,
          xAxisTickLabelFormat: (dateStr) => {
            const date = new Date(dateStr);
            const startDate = new Date('2024-01-01'); // Reference date
            const diffDays = Math.round((date - startDate) / (1000 * 60 * 60 * 24));
            
            // Format based on duration
            if (diffDays < 7) {
              return `Day ${diffDays + 1}`; // +1 for human-friendly counting
            } else if (diffDays < 30) {
              const weeks = Math.floor(diffDays / 7);
              const days = diffDays % 7;
              return days === 0 
                ? `Week ${weeks}` 
                : `Week ${weeks}+${days}d`;
            } else {
              const months = Math.floor(diffDays / 30);
              const days = diffDays % 30;
              return days === 0 
                ? `Month ${months}` 
                : `Month ${months}+${days}d`;
            }
          },
          tooltipHtml: emptyTooltip,
        });

        // Generate some sample data
        const generateSampleData = () => {
          const startDate = new Date('2024-01-01');
          const series = ['Series A', 'Series B'];
          const values = [];
          
          series.forEach(seriesName => {
            for (let i = 0; i < 10; i++) {
              const date = new Date(startDate);
              date.setDate(date.getDate() + i * 3); // Every 3 days
              
              values.push({
                xValue: date.toISOString().split('T')[0],
                series: seriesName,
                yValue: Math.floor(Math.random() * 50) + 25 // Random value between 25-75
              });
            }
          });
          
          return {
            series: series.map(name => ({
              key: name,
              color: name === 'Series A' ? '#6366f1' : '#22c55e'
            })),
            values
          };
        };

        const data = generateSampleData();
        multiLine3.series = data.series;
        multiLine3.values = data.values;
        multiLine3.redraw();
      }

      {
        const bar4 = new BarChart({
          elChart: document.getElementById("bar-4-chart"),
          tooltipHtml: emptyTooltip,
          yAxisTickLabelFormat: (value) => {
            // Format large numbers with M/B suffixes
            if (value >= 1000000000) {
              return `${(value / 1000000000).toFixed(1)}B`;
            }
            if (value >= 1000000) {
              return `${(value / 1000000).toFixed(1)}M`;
            }
            if (value >= 1000) {
              return `${(value / 1000).toFixed(1)}K`;
            }
            return value;
          },
          values: [
            {
              date: "2023-01",
              dateLabel: "Jan",
              value: 1500000,
            },
            {
              date: "2023-02",
              dateLabel: "Feb",
              value: 2800000,
            },
            {
              date: "2023-03",
              dateLabel: "Mar",
              value: 4200000,
            },
            {
              date: "2023-04",
              dateLabel: "Apr",
              value: 3700000,
            },
            {
              date: "2023-05",
              dateLabel: "May",
              value: 5100000,
            }
          ],
          showYAxisTickLabels: true,
          showYAxisTicks: true,
          yAxisLabel: "Revenue ($)",
        });
        bar4.redraw();
      }
    </script>
  </body>
</html>
